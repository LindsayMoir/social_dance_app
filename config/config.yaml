checkpoint:
  extracted_text: checkpoint/extracted_text.xlsx
  fb_block_state: checkpoint/fb_block_state.json
  fb_search: checkpoint/fb_search_keywords.csv
  fb_urls: checkpoint/fb_urls.csv
  fb_urls_cp: checkpoint/fb_urls_cp.csv
  fb_urls_cp_status: false
clean_up:
  old_events: 3
constants:
  black_list_domains: data/other/black_list_domains.csv
  delete_known_bad_urls: nuline, myglobaleventreports
  fb_base_url: https://www.facebook.com/search/events?q=
  fb_location_id: '&filters=eyJycF9ldmVudHNfbG9jYXRpb246MCI6IntcIm5hbWVcIjpcImZpbHRlcl9ldmVudHNfbG9jYXRpb25cIixcImFyZ3NcIjpcIjEwMzEzNTg3OTcyNzM4MlwifSJ9'
crawling:
  depth_limit: 2
  fb_base_urls_limit: 5
  fb_block_cooldown_base_seconds: 1200
  fb_block_cooldown_max_seconds: 7200
  fb_block_failures_before_cooldown: 1
  fb_block_state_max_scopes: 800
  fb_block_state_ttl_days: 45
  fb_event_links_per_base_limit: 5
  fb_final_wait_ms: 1500
  fb_inter_request_wait_max_ms: 15000
  fb_inter_request_wait_min_ms: 5000
  fb_post_expand_wait_ms: 1800
  fb_post_nav_wait_ms: 3500
  fb_randomize_base_url_order: true
  fb_randomize_event_link_order: true
  headless: false
  max_attempts: 3
  max_crawl_trys: 3
  max_website_urls: 10
  prompt_max_length: 100000
  random_test_limit: 10
  scraper_concurrent_requests: 16
  scraper_concurrent_requests_per_domain: 8
  scraper_download_timeout_seconds: 35
  scraper_playwright_timeout_ms: 35000
  scraper_post_load_wait_ms: 1000
  scraper_priority_download_timeout_seconds: 90
  scraper_priority_retry_times: 3
  scraper_retry_times: 1
  scroll_depth: 2
  urls_run_limit: 500
date_range:
  days_ahead: 365
  months: 3
debug:
  address_fix: debug/address_fix.csv
  after_url_updated: debug/after_url_updated.csv
  before_url_updated: debug/before_url_updated.csv
  prompt_debug: true
fuzzywuzzy:
  hurdle: 70
input:
  butchart_image_url: https://butchartgardens.com/wp-content/uploads/2025/06/Outdoor-Summer-Concert-2025-994x1536.jpg
  butchart_parent_url: https://butchartgardens.com/summer-entertainment-calendar/
  butchart_pdf_url: https://butchartgardens.com/wp-content/uploads/2025/06/Summer-Entertainment-calendar-double-sided-2025.pdf
  calendar_urls: data/other/calendar_urls.csv
  countries: data/other/countries.csv
  data_keywords: data/other/keywords.csv
  edge_cases: data/other/edge_cases.csv
  email_events: data/other/email_events.csv
  emails: data/other/emails.csv
  gs_urls: data/urls/gs_urls.csv
  images: data/other/images.csv
  municipalities: data/other/municipalities.txt
  nulls_addresses: data/other/nulls_addresses.csv
  pdfs: data/other/pdfs.csv
  predibase: data/other/duplicates_predibase.csv
  sql_input: data/other/sql_input.json
  urls: data/urls
llm:
  anthropic_model: claude-opus-4-20250514
  chatbot_openrouter_model_candidates:
  - deepseek/deepseek-v3.2
  chatbot_provider_order:
  - openai
  - openrouter
  - gemini
  fallback_enabled: true
  fallback_provider_order:
  - mistral
  - openrouter
  - openai
  - gemini
  gemini_model: gemini-2.5-flash
  gemini_model_candidates:
  - gemini-2.5-flash-lite
  - gemini-2.5-flash
  - gemini-flash-latest
  gemini_timeout_seconds: 60
  mistral_model: mistral-large-2512
  mistral_model_candidates:
  - mistral-large-2512
  - mistral-large-latest
  model_alias: default_fast
  model_candidates:
    gemini:
      default_fast:
      - gemini-2.5-flash-lite
      - gemini-2.5-flash
      - gemini-flash-latest
    mistral:
      default_fast:
      - mistral-large-2512
      - mistral-large-latest
    openai:
      default_fast:
      - gpt-5-mini
      - gpt-4.1-mini
    openrouter:
      default_fast:
      - deepseek/deepseek-v3.2
      - qwen/qwen3-coder
      - openai/gpt-oss-120b:free
      - qwen/qwen3-coder:free
      - mistralai/mistral-small-3.1-24b-instruct:free
  openai_max_retries: 1
  openai_model: gpt-5-mini
  openai_model_candidates:
  - gpt-5-mini
  - gpt-4.1-mini
  openai_timeout_cooldown_seconds: 180
  openai_timeout_max_strikes: 3
  openai_timeout_seconds: 90
  openrouter_base_url: https://openrouter.ai/api/v1
  openrouter_cooldown_seconds: 300
  openrouter_model: openai/gpt-oss-120b:free
  openrouter_model_candidates:
  - deepseek/deepseek-v3.2
  - qwen/qwen3-coder
  - openai/gpt-oss-120b:free
  - qwen/qwen3-coder:free
  - mistralai/mistral-small-3.1-24b-instruct:free
  openrouter_model_rotation_enabled: false
  openrouter_rate_limit_max_strikes: 2
  openrouter_timeout_seconds: 60
  provider: mistral
  provider_retry_base_delay_seconds: 0.5
  provider_retry_jitter_seconds: 0.3
  provider_retry_max_attempts: 2
  provider_retry_max_delay_seconds: 4.0
  provider_rotation_enabled: false
  provider_rotation_order:
  - mistral
  - openrouter
  - openai
  - gemini
  regular_openai_first_every_n_requests: 3
  self_healing_enabled: true
  spend_money: true
location:
  epicentre: Victoria, British Columbia, Canada
logging:
  extracted_text: output/extracted_text.csv
  log_file: logs/pipeline_4938_20250728_113202680395.log
  log_file_p2: logs/log_file_p2.txt
  scraper_log_file: logs/scraper_log.txt
normalization:
  address_aliases:
  - aliases:
    - The Wicket Hall
    - Wicket Hall
    - Studio 919
    - Studio 919 (Strathcona Hotel)
    - The Strath
    - Strathcona Hotel
    - The Strathcona Hotel
    - 919 Douglas St, Victoria, BC V8W 2C2, CA
    canonical:
      address_id: 109
      building_name: The Wicket Hall (Strathcona Hotel)
      city: Victoria
      country_id: CA
      full_address: The Wicket Hall (Strathcona Hotel), 919 Douglas St, Victoria,
        BC V8W 2C2, CA
      postal_code: V8W 2C2
      province_or_state: BC
      street_name: Douglas St
      street_number: '919'
    name: wicket_hall_strathcona_aliases
  event_overrides:
  - match:
      url_contains: debrhymerband.com/shows
    name: debrhymer_shows_event_type
    set:
      event_type: social dance, live music
  source_score_penalties:
  - match:
      source_equals: Victoria Latin Dance Association
    name: vlda_dedup_penalty
    penalty: 100
  synthetic_events:
  - enabled: true
    event:
      dance_style: cuban salsa, rueda, salsa
      day_of_week: Wednesday
      description: Weekly UVic cuban rueda salsa lesson, followed by a social dance.
        This happens most Wednesdays. Usually outside of the Students Union Building
        and sometimes inside at Vertigo. Please check and see if it is on this week.
      end_date: ''
      end_time: '21:00'
      event_name: UVic Salsa Rueda
      event_type: class, social dance
      location: Uvic Students Union Building, 3800 Finnerty Rd A101E, Victoria, BC
        V8P 5C2
      price: '0'
      source: Uvic Cuban Salsa Club
      start_date: ''
      start_time: '19:00'
      url: https://www.facebook.com/groups/cubansalsaclub/
    name: uvic_rueda_weekly
    recurrence:
      include_today: true
      type: weekly_weekday
      weekday: Wednesday
output:
  address_alias_audit: output/address_alias_hits.csv
  dedup: output/dedup.csv
  ebs_events: data/other/ebs_events.csv
  ebs_keywords_processed: output/ebs_keywords_processed.csv
  ebs_search_results: output/ebs_search_results.csv
  events_urls_diff: output/events_urls_diff.csv
  fb_search_results: output/fb_search_results.csv
  gs_search_results: output/gs_search_results.csv
  irrelevant_rows: output/irrelevant_rows.csv
  is_foreign: output/is_foreign.csv
prompts:
  address:
    file: prompts/address_from_raw_page.txt
    schema: address_extraction
  address_0_null_loc_fix:
    file: prompts/address_0_null_location_fix_prompt.txt
    schema: address_extraction
  address_fix:
    file: prompts/address_fix_prompt.txt
    schema: address_extraction
  address_internet_fix:
    file: prompts/address_internet_fix.txt
    schema: address_extraction
  chatbot_instructions:
    file: prompts/chatbot_instructions.txt
    schema: null
  contextual_sql:
    file: prompts/contextual_sql_prompt.txt
    schema: null
  dedup:
    file: prompts/dedup_prompt.txt
    schema: deduplication_response
  dedup_llm_address:
    file: prompts/dedup_llm_address.txt
    schema: address_deduplication
  default:
    file: prompts/default.txt
    schema: event_extraction
  djdancingdean:
    file: prompts/djdancingdean_prompt.txt
    schema: event_extraction
  event_name_location_fix:
    file: prompts/event_name_location_fix.txt
    schema: address_extraction
  fb:
    file: prompts/fb_prompt.txt
    schema: event_extraction
  fix_dup_addresses_semantic_clustering:
    file: prompts/fix_dup_addresses.txt
    schema: null
  https://gotothecoda.com/calendar:
    file: prompts/calendar_venues.txt
    schema: event_extraction
  https://loftpubvictoria.com/events/month/:
    file: prompts/calendar_venues.txt
    schema: event_extraction
  https://thedukesaloon.com/:
    file: prompts/calendar_venues.txt
    schema: event_extraction
  https://vbds.org/other-dancing-opportunities/:
    file: prompts/default.txt
    schema: event_extraction
  https://www.bardandbanker.com/live-music:
    file: prompts/bard_and_banker_prompt.txt
    schema: event_extraction
  https://www.debrhymerband.com/shows:
    file: prompts/deb_rhymer_prompt.txt
    schema: event_extraction
  images:
    file: prompts/images_prompt.txt
    schema: event_extraction
  interpretation:
    file: prompts/interpretation_prompt.txt
    schema: null
  irrelevant_rows:
    file: prompts/irrelevant_rows_prompt.txt
    schema: relevance_classification
  relevant_dance_url:
    file: prompts/relevant_dance_url.txt
    schema: null
  result_analysis:
    file: prompts/result_analysis_prompt.txt
    schema: null
  single_event:
    file: prompts/single_event.txt
    schema: event_extraction
score:
  dup_trans_db_scan: false
search:
  gs_num_results: 10
startup:
  use_db: false
temporal_expressions:
  day_names:
    friday: 4
    monday: 0
    saturday: 5
    sunday: 6
    thursday: 3
    tuesday: 1
    wednesday: 2
  time_periods:
    afternoon:
      end_time: '17:00:00'
      start_time: '12:00:00'
    evening:
      end_time: '21:00:00'
      start_time: '17:00:00'
    morning:
      end_time: '12:00:00'
      start_time: 06:00:00
    night:
      end_time: null
      start_time: '18:00:00'
testing:
  drop_tables: false
  fast_api_url: http://localhost:8080/query
  local: false
  nof_no_url_events: 10
  sql: true
  status: true
  validation:
    chatbot:
      execution_threshold: 0.9
      fallback_scoring: true
      llm_evaluation: true
      question_templates: tests/data/chatbot_test_questions.yaml
      score_threshold: 70
    reporting:
      generate_csv: true
      generate_html: true
      llm_activity_hours: 24
      llm_activity_thresholds:
        high:
          attempts: 150
          gemini_attempts: 20
          provider_exhausted: 10
          rate_limits: 25
          timeouts: 15
        medium:
          attempts: 60
          gemini_attempts: 5
          provider_exhausted: 3
          rate_limits: 10
          timeouts: 5
      output_dir: output
      reliability_gates:
        enabled: true
        thresholds:
          max_llm_provider_exhausted: 10
          max_llm_rate_limits: 25
          max_llm_timeouts: 15
          max_scrape_critical_failures: 0
          min_chatbot_average_score: 70
          min_chatbot_execution_success_rate: 0.9
          min_reliability_score: 75
    scraping:
      consecutive_failures_threshold: 2
      days_back: 7
      edge_cases_file: data/other/edge_cases.csv
      facebook_group_manual_review: true
      facebook_group_manual_review_max_urls: 3
      facebook_group_probe_limit: 5
      facebook_group_probe_max_failures: 0
      min_attempts: 3
      min_hit_ratio: 0.5
      whitelist_consecutive_failures_threshold: 3
      whitelist_days_back: 60
      whitelist_file: data/urls/aaa_urls.csv
